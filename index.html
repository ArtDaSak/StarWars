<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <div id="contenedor">
        <h2>Lista de personajes de Star Wars</h2>
    </div>

    <script>
        const urlBase = "https://swapi.dev/api/people";
        const contenedor = document.getElementById("contenedor");

        const tabla = document.createElement("table");
        const thead = document.createElement("thead");
        const tbody = document.createElement("tbody");

        // Encabezado de tabla
        const trencabezado = document.createElement("tr");
        const encabezados = ["Nombre", "Altura", "Peso", "Color de cabello", "Género"];
        encabezados.forEach((elemento) => {
            const th = document.createElement("th");
            th.textContent = elemento;
            trencabezado.appendChild(th);
        });

        thead.appendChild(trencabezado);
        tabla.appendChild(thead);
        tabla.appendChild(tbody);
        contenedor.appendChild(tabla);

        // Función para traer todos los personajes de todas las páginas
        const fetchAllCharacters = async (url) => {
            try {
                while (url) {
                    const respuesta = await fetch(url);
                    const info = await respuesta.json();

                    info.results.forEach(pj => {
                        const fila = document.createElement("tr");

                        const nombre = document.createElement("td");
                        nombre.textContent = pj.name;

                        const altura = document.createElement("td");
                        altura.textContent = pj.height;

                        const peso = document.createElement("td");
                        peso.textContent = pj.mass;

                        const cabello = document.createElement("td");
                        cabello.textContent = pj.hair_color;

                        const genero = document.createElement("td");
                        genero.textContent = pj.gender;

                        fila.appendChild(nombre);
                        fila.appendChild(altura);
                        fila.appendChild(peso);
                        fila.appendChild(cabello);
                        fila.appendChild(genero);

                        tbody.appendChild(fila);
                    });

                    // Cambia a la siguiente página si existe
                    url = info.next;
                }
            } catch (error) {
                const mensajeError = document.createElement("h1");
                mensajeError.textContent = "Error al traer datos!!!";
                tabla.before(mensajeError);
            }
        };

        // Llamada inicial
        fetchAllCharacters(urlBase);
    </script>
</body>
</html>